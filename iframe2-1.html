<!DOCTYPE html>

<script src="https://unpkg.com/comlink@4.4.2/dist/umd/comlink.js"></script>
<script >

  function showMessage(msg) {
    alert(`show message in iframe2-1: ${msg}`);
  }

  function showMsgInParent(msg) {
     var f = Comlink.wrap(Comlink.windowEndpoint(window.top))
     f.showMessage(msg).then(() => {
       alert("iframe1: message sent to parent");
     },
    (reason)=> alert(`iframe1: error sending message to parent: ${reason}`))
    .catch((err) => {
       alert(`iframe1: error in showMsgInParent: ${err}`);
     });
  }
  Comlink.expose({ showMessage }, Comlink.windowEndpoint(window));
</script>
<input type="button" value="call top window" onclick="showMsgInParent('hello from iframe1')">